(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{168:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(32),r=n.n(c),o=n(9),s=n(8),i=n.n(s),u=n(13),l=n(20),d=n(21),j=n(10),p=n(6),b=n(37),h=n(1),m=["isAuthenticated","component"],f=function(e){var t=e.isAuthenticated,n=e.component,a=Object(b.a)(e,m);return localStorage.setItem("lastpath",a.location.pathname),Object(h.jsx)(j.b,Object(p.a)(Object(p.a)({},a),{},{component:function(e){return t?Object(h.jsx)(n,Object(p.a)({},e)):Object(h.jsx)(j.a,{to:"/auth/login"})}}))},O=["isAuthenticated","component"],x=function(e){var t=e.isAuthenticated,n=e.component,a=Object(b.a)(e,O);return Object(h.jsx)(j.b,Object(p.a)(Object(p.a)({},a),{},{component:function(e){return t?Object(h.jsx)(j.a,{to:"/"}):Object(h.jsx)(n,Object(p.a)({},e))}}))},v=n(36),g=n.n(v),y=n(28);n(170),n(78);y.a.initializeApp({apiKey:"AIzaSyBOmfVFUHS5bGuL-NmHAaTKYBTfU94_00A",authDomain:"react-journal-app-e4f66.firebaseapp.com",projectId:"react-journal-app-e4f66",storageBucket:"react-journal-app-e4f66.appspot.com",messagingSenderId:"270562688111",appId:"1:270562688111:web:88fd764485d010831c619a"});var _=y.a.firestore(),w=new y.a.auth.GoogleAuthProvider,N=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.collection("".concat(t,"/journal/notes")).get();case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(p.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={login:"[Auth] Login",logout:"[Auth] Logout",uiSetError:"[UI] Set Error",uiRemoveError:"[UI] Remove Error",uiStartLoading:"[UI] Start loading",uiFinishLoading:"[UI] Finish loading",notesAddNew:"[Notes] New note",notesActive:"[Notes] Set active note",notesLoad:"[Notes] Load notes",notesUpdated:"[Notes] Update note",notesFileUrl:"[Notes] Update image url",notesDelete:"[Notes] Delete note",notesLogoutCleaning:"[Notes] Logout Cleaning"},S=n(22),C=n.n(S),E=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dwlla9j1z/image/upload",(n=new FormData).append("upload_preset","react-journal-app"),n.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dwlla9j1z/image/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return c=e.sent,e.abrupt("return",c.secure_url);case 15:return e.next=17,a.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(4),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){return{type:k.notesActive,payload:Object(p.a)({id:e},t)}},L=function(e,t){return{type:k.notesAddNew,payload:Object(p.a)({id:e},t)}},I=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:a=t.sent,n(U(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return{type:k.notesLoad,payload:e}},D=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.uid,e.url||delete e.url,delete(r=Object(p.a)({},e)).id,t.next=6,_.doc("".concat(c,"/journal/notes/").concat(e.id)).update(r);case 6:n(P(e.id,r)),C.a.fire("Saved",e.title,"success");case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},P=function(e,t){return{type:k.notesUpdated,payload:{id:e,note:Object(p.a)({id:e},t)}}},R=function(e){return{type:k.notesDelete,payload:e}},F=function(e){var t=e.id,n=e.date,a=e.title,c=e.body,r=e.url,s=Object(o.b)(),i={date:n,title:a,body:c,url:r},u=g()(n);return Object(h.jsxs)("div",{className:"journal__entry pointer animate__animated animate__fadeIn",onClick:function(){s(A(t,i))},children:[r&&Object(h.jsx)("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(r,")")}}),Object(h.jsxs)("div",{className:"journal__entry-body",children:[Object(h.jsx)("p",{className:"journal__entry-title",children:a}),Object(h.jsx)("p",{className:"journal__entry-content",children:c})]}),Object(h.jsxs)("div",{className:"journal__entry-date-box",children:[Object(h.jsx)("span",{children:u.format("dddd")}),Object(h.jsx)("h4",{children:u.format("Do")})]})]})},T=function(){var e=Object(o.c)((function(e){return e.notes})).notes;return Object(h.jsx)("div",{className:"journal__entries",children:e.map((function(e){return Object(h.jsx)(F,Object(p.a)({},e),e.id)}))})},z=function(e,t){return{type:k.login,payload:{uid:e,displayName:t}}},M=function(){return{type:k.logout}},Y=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})).name;return Object(h.jsxs)("aside",{className:"journal__sidebar",children:[Object(h.jsxs)("div",{className:"journal__sidebar-navbar",children:[Object(h.jsxs)("h3",{className:"mt-5",children:[Object(h.jsx)("i",{className:"far fa-moon"}),Object(h.jsx)("span",{children:t})]}),Object(h.jsx)("button",{className:"btn",onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.auth().signOut();case 2:t(M()),t({type:k.notesLogoutCleaning});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]}),Object(h.jsxs)("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,c={title:"",body:"",date:(new Date).getTime()},e.next=4,_.collection("".concat(a,"/journal/notes")).add(c);case 4:r=e.sent,t(A(r.id,c)),t(L(r.id,c));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},children:[Object(h.jsx)("i",{className:"far fa-calendar-plus fa-5x"}),Object(h.jsx)("p",{className:"mt-5",children:"New entry"})]}),Object(h.jsx)(T,{})]})},B=function(){return Object(h.jsxs)("div",{className:"nothing__main-content",children:[Object(h.jsxs)("p",{children:["Select comething",Object(h.jsx)("br",{}),"or create an entry"]}),Object(h.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},G=n(35),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),c=n[0],r=n[1],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r(t)},s=function(e){var t=e.target;r(Object(p.a)(Object(p.a)({},c),{},Object(G.a)({},t.name,t.value)))};return[c,s,o]},V=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notes})).active,n=t.date,a=g()(n);return Object(h.jsxs)("div",{className:"notes__appbar",children:[Object(h.jsx)("span",{children:a.format("dddd, MMMM Do YYYY")}),Object(h.jsx)("input",{id:"fileSelector",name:"file",type:"file",style:{display:"none"},onChange:function(t){var n=t.target.files[0];n&&e(function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().notes.active,C.a.fire({title:"Uploading...",text:"Please wait...",allowOutsideClick:!1,didOpen:function(){C.a.showLoading()}}),t.next=4,E(e);case 4:r=t.sent,c.url=r,n(D(c)),C.a.close();case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n))}}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){document.querySelector("#fileSelector").click()},className:"btn",children:"Picture"}),Object(h.jsx)("button",{className:"btn",onClick:function(){e(D(t))},children:"Save"})]})]})},q=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notes})).active,n=W(t),c=Object(l.a)(n,3),r=c[0],s=c[1],d=c[2],j=r.body,b=r.title,m=r.id,f=Object(a.useRef)(t.id);Object(a.useEffect)((function(){t.id!==f.current&&(d(t),f.current=t.id)}),[t,d]),Object(a.useEffect)((function(){e(A(r.id,Object(p.a)({},r)))}),[r,e]);return Object(h.jsxs)("div",{className:"notes__main-content",children:[Object(h.jsx)(V,{}),Object(h.jsx)("div",{className:"notes__content",children:Object(h.jsxs)("form",{children:[Object(h.jsx)("input",{type:"text",placeholder:"Some awesome title",className:"notes__title-input",autoComplete:"off",name:"title",value:b,onChange:s}),Object(h.jsx)("textarea",{placeholder:"What happen today?",className:"notes__textarea",name:"body",rows:"5",value:j,onChange:s}),t.url&&Object(h.jsx)("div",{className:"notes__image",children:Object(h.jsx)("img",{src:t.url,alt:"img"})})]})}),Object(h.jsx)("button",{className:"btn btn-danger",onClick:function(){e(function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.uid,t.next=3,_.doc("".concat(c,"/journal/notes/").concat(e)).delete();case 3:n(R(e));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(m))},children:"Delete"})]})},H=function(){var e=Object(o.c)((function(e){return e.notes})).active;return Object(h.jsxs)("div",{className:"journal__main-content animate__animated animate__fadeIn",children:[Object(h.jsx)(Y,{}),Object(h.jsx)("main",{children:e?Object(h.jsx)(q,{}):Object(h.jsx)(B,{})})]})},J=function(){var e=Object(o.b)(),t=W({email:"valengg@gmail.com",password:"123456"}),n=Object(l.a)(t,2),a=n[0],c=n[1],r=a.email,s=a.password;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{className:"auth__title mb-5",children:"Login"}),Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(n){return y.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;n(z(t.uid,t.displayName))})).catch((function(e){C.a.fire("Error",e.message,"error")}))}}(r,s))},children:[Object(h.jsx)("input",{className:"auth__input",type:"text",placeholder:"email",autoComplete:"false",name:"email",value:r,onChange:c}),Object(h.jsx)("input",{className:"auth__input",type:"password",placeholder:"password",name:"password",value:s,onChange:c}),Object(h.jsx)("button",{className:"btn btn-primary btn-block",type:"submit",children:"Login"}),Object(h.jsxs)("div",{className:"auth__social-network",children:[Object(h.jsx)("p",{children:"Login with social networks"}),Object(h.jsxs)("div",{className:"google-btn",onClick:function(){e((function(e){y.a.auth().signInWithPopup(w).then((function(t){var n=t.user;e(z(n.uid,n.displayName))}))}))},children:[Object(h.jsx)("div",{className:"google-icon-wrapper",children:Object(h.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(h.jsx)("p",{className:"btn-text",children:Object(h.jsx)("b",{children:"Sign in with google"})})]})]}),Object(h.jsx)(d.b,{to:"/auth/register",className:"link",children:"Create new account"})]})]})},K=n(64),X=n.n(K),Q=function(e){return{type:k.uiSetError,payload:e}},Z=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.ui})).msgError,n=W({name:"Valentina",email:"valengg@gmail.com",password:123456,password2:123456}),a=Object(l.a)(n,2),c=a[0],r=a[1],s=c.name,j=c.email,p=c.password,b=c.password2,m=function(){return 0===s.trim().length?(e(Q("Name is required")),!1):X.a.isEmail(j)?p.length<6?(e(Q("Password should be at least 6 characters")),!1):p!==b?(e(Q("Passwords doesn`t match each other")),!1):(e({type:k.uiRemoveError}),!0):(e(Q("Email is not valid")),!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{className:"auth__title mb-5",children:"Register"}),Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault(),m()&&e(function(e,t,n){return function(a){y.a.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=Object(u.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.user,e.next=3,c.updateProfile({displayName:n});case 3:console.log(c),a(z(c.uid,c.displayName));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){C.a.fire("Error",e.message,"error")}))}}(j,p.toString(),s))},children:[t&&Object(h.jsx)("div",{className:"auth__alert-error",children:t}),Object(h.jsx)("input",{className:"auth__input",type:"text",placeholder:"name",autoComplete:"off",name:"name",onChange:r,value:s}),Object(h.jsx)("input",{className:"auth__input",type:"text",placeholder:"email",autoComplete:"off",name:"email",onChange:r,value:j}),Object(h.jsx)("input",{className:"auth__input",type:"password",placeholder:"password",name:"password",onChange:r,value:p}),Object(h.jsx)("input",{className:"auth__input",type:"password",placeholder:"confirm password",name:"password2",onChange:r,value:b}),Object(h.jsx)("button",{className:"btn btn-primary btn-block mb-1",type:"submit",children:"Register"}),Object(h.jsx)(d.b,{to:"/auth/login",className:"link mt-5",children:"Already registered?"})]})]})},$=function(){return Object(h.jsx)("div",{className:"auth__main",children:Object(h.jsx)("div",{className:"auth__box-container animate__animated animate__fadeInUp",children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{exact:!0,path:"/auth/login",component:J}),Object(h.jsx)(j.b,{exact:!0,path:"/auth/register",component:Z}),Object(h.jsx)(j.a,{to:"/auth/login"})]})})})},ee=function(){var e=Object(o.b)(),t=Object(a.useState)(!0),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),p=Object(l.a)(s,2),b=p[0],m=p[1];return Object(a.useEffect)((function(){y.a.auth().onAuthStateChanged(function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n?void 0:n.uid)?(e(z(n.uid,n.displayName)),m(!0),e(I(n.uid))):m(!1),r(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,r,m]),c?Object(h.jsx)("h1",{children:"Cargando..."}):Object(h.jsx)(d.a,{children:Object(h.jsx)("div",{children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(x,{path:"/auth",isAuthenticated:b,component:$}),Object(h.jsx)(f,{exact:!0,path:"/",isAuthenticated:b,component:H}),Object(h.jsx)(j.a,{to:"/auth/login"})]})})})},te=n(29),ne=n(65),ae=n(46),ce={notes:[],active:null},re={loading:!1,msgError:null},oe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.c,se=Object(te.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.login:return{uid:t.payload.uid,name:t.payload.displayName};case k.logout:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.uiSetError:return Object(p.a)(Object(p.a)({},e),{},{msgError:t.payload});case k.uiRemoveError:return Object(p.a)(Object(p.a)({},e),{},{msgError:null});case k.uiStartLoading:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case k.uiStopLoading:return Object(p.a)(Object(p.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.notesActive:return Object(p.a)(Object(p.a)({},e),{},{active:Object(p.a)({},t.payload)});case k.notesAddNew:return Object(p.a)(Object(p.a)({},e),{},{notes:[t.payload].concat(Object(ae.a)(e.notes))});case k.notesLoad:return Object(p.a)(Object(p.a)({},e),{},{notes:Object(ae.a)(t.payload)});case k.notesUpdated:return Object(p.a)(Object(p.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case k.notesDelete:return Object(p.a)(Object(p.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case k.notesLogoutCleaning:return Object(p.a)(Object(p.a)({},e),{},{active:null,notes:[]});default:return e}}}),ie=Object(te.d)(se,oe(Object(te.a)(ne.a))),ue=function(){return Object(h.jsx)(o.a,{store:ie,children:Object(h.jsx)(ee,{})})};n(168);r.a.render(Object(h.jsx)(ue,{}),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.58069806.chunk.js.map